Milestone 2 done. Some fixes and polishing

C11